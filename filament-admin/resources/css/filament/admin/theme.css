@import '../../../../vendor/filament/filament/resources/css/theme.css';

@source '../../../../app/Filament/**/*';
@source '../../../../resources/views/filament/**/*';

@font-face {
    font-family: 'IRANYekan';
    src: url('/fonts/kdini/IRANYekanRegular.ttf') format('truetype');
    font-weight: 400;
    font-style: normal;
    font-display: swap;
}

@font-face {
    font-family: 'IRANYekan';
    src: url('/fonts/kdini/IRANYekanBold.ttf') format('truetype');
    font-weight: 700;
    font-style: normal;
    font-display: swap;
}

@font-face {
    font-family: 'IRANYekan';
    src: url('/fonts/kdini/IRANYekanExtraBold.ttf') format('truetype');
    font-weight: 900;
    font-style: normal;
    font-display: swap;
}

@theme {
    --font-family: 'IRANYekan', 'Vazirmatn', 'Tahoma', sans-serif;
}

@layer base {
    :root {
        --kdini-bg-main: 22 32 45;
        --kdini-bg-soft: 28 41 57;
        --kdini-surface: 33 50 71;
        --kdini-surface-strong: 37 58 82;
        --kdini-border: 86 121 159;
        --kdini-text: 226 236 250;
        --kdini-muted: 161 186 218;
        --kdini-accent: 92 166 255;
        --kdini-accent-strong: 56 128 214;
        --kdini-success: 34 197 157;
        --kdini-console-bg: 19 30 43;
        --kdini-console-text: 190 230 255;
        --kdini-card-radius: 0.8rem;
        --kdini-space-1: 0.28rem;
        --kdini-space-2: 0.46rem;
        --kdini-space-3: 0.7rem;
        --kdini-space-4: 0.82rem;
    }

    html,
    body,
    .fi-body,
    .fi-page,
    .fi-sidebar,
    .fi-topbar,
    .fi-main {
        font-family: var(--font-family);
        direction: rtl;
        color: rgb(var(--kdini-text));
    }

    body {
        min-height: 100vh;
        background-color: rgb(var(--kdini-bg-main));
        background-image:
            radial-gradient(circle at 100% 0%, rgb(44 82 128 / 0.42), transparent 30%),
            radial-gradient(circle at 0% 100%, rgb(26 56 94 / 0.38), transparent 34%),
            linear-gradient(165deg, rgb(var(--kdini-bg-main)), rgb(16 26 38));
        background-attachment: fixed;
    }

    ::selection {
        background: rgb(var(--kdini-accent) / 0.32);
        color: rgb(246 250 255);
    }

    [dir='ltr'] {
        direction: ltr;
        unicode-bidi: plaintext;
    }
}

@layer components {
    .fi-layout,
    .fi-main {
        background: transparent !important;
    }

    .fi-sidebar {
        background:
            linear-gradient(180deg, rgb(var(--kdini-surface-strong) / 0.95), rgb(var(--kdini-bg-soft) / 0.95)) !important;
        border-left: 1px solid rgb(var(--kdini-border) / 0.55) !important;
    }

    .fi-topbar {
        background: rgb(var(--kdini-bg-soft) / 0.86) !important;
        border-bottom: 1px solid rgb(var(--kdini-border) / 0.45) !important;
        backdrop-filter: blur(8px);
    }

    .fi-main-ctn,
    .fi-section,
    .fi-wi,
    .fi-ta,
    .fi-in,
    .fi-modal-window,
    .fi-dropdown-panel {
        background-color: rgb(var(--kdini-surface) / 0.92) !important;
        border: 1px solid rgb(var(--kdini-border) / 0.5) !important;
        color: rgb(var(--kdini-text));
        border-radius: 1rem;
        box-shadow: 0 12px 30px -24px rgb(10 15 24 / 0.95);
    }

    .fi-main-ctn {
        margin-inline: auto;
        max-width: min(1760px, calc(100vw - 0.75rem));
    }

    .kd-page-stack {
        display: flex;
        flex-direction: column;
        gap: var(--kdini-space-4);
    }

    .kd-toolbar {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        justify-content: space-between;
        gap: var(--kdini-space-2);
    }

    .kd-toolbar-actions {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        gap: var(--kdini-space-1);
    }

    .kd-search-wrap {
        min-width: min(20rem, 100%);
        width: min(100%, 20rem);
        flex: 1 1 16rem;
    }

    .kd-grow-input {
        min-width: min(28rem, 100%);
        width: min(100%, 34rem);
        flex: 1 1 22rem;
    }

    .kd-search-wrap .fi-input-wrp,
    .kd-grow-input .fi-input-wrp {
        width: 100%;
    }

    .fi-section-header-heading,
    .fi-page-header-heading,
    .fi-ta-header-heading {
        letter-spacing: -0.01em;
        font-weight: 900;
        color: rgb(var(--kdini-text));
    }

    .fi-section-header-description,
    .fi-page-header-description,
    .fi-fo-field-wrp-hint,
    .fi-fo-field-wrp-helper-text {
        color: rgb(var(--kdini-muted));
    }

    .fi-sidebar-item-button,
    .fi-sidebar-group-label,
    .fi-topbar-item-btn {
        color: rgb(var(--kdini-muted));
        font-weight: 700;
    }

    .fi-sidebar-item-button:hover,
    .fi-sidebar-item-button.fi-active,
    .fi-sidebar-item-button[aria-current='page'] {
        color: rgb(var(--kdini-text));
        background: rgb(var(--kdini-accent-strong) / 0.28);
    }

    .fi-btn {
        border-radius: 0.75rem;
        font-weight: 800;
        border: 1px solid rgb(var(--kdini-border) / 0.55);
        min-height: 1.84rem;
        padding-inline: 0.6rem;
        font-size: 0.76rem;
        transition: transform 0.12s ease, filter 0.12s ease;
    }

    .fi-btn:hover {
        filter: brightness(1.06);
        transform: translateY(-1px);
    }

    .fi-btn-color-gray {
        background: rgb(var(--kdini-bg-soft) / 0.95) !important;
        color: rgb(var(--kdini-text)) !important;
    }

    .fi-btn-color-primary {
        background: linear-gradient(135deg, rgb(var(--kdini-accent)), rgb(var(--kdini-accent-strong))) !important;
        color: rgb(247 251 255) !important;
        border-color: rgb(var(--kdini-accent-strong) / 0.75) !important;
    }

    .fi-btn-color-success {
        background: linear-gradient(135deg, rgb(var(--kdini-success)), rgb(18 139 111)) !important;
        border-color: rgb(21 146 115 / 0.75) !important;
    }

    .fi-btn-color-danger {
        border-color: rgb(251 113 133 / 0.75) !important;
    }

    .fi-input,
    .fi-select-input,
    .fi-textarea {
        color: rgb(var(--kdini-text)) !important;
    }

    .fi-input-wrp {
        border-radius: 0.75rem;
        background: rgb(var(--kdini-bg-soft) / 0.75) !important;
        box-shadow: inset 0 0 0 1px rgb(var(--kdini-border) / 0.55) !important;
        min-height: 1.9rem;
    }

    .fi-input-wrp:focus-within {
        box-shadow:
            inset 0 0 0 1px rgb(var(--kdini-accent) / 0.82),
            0 0 0 3px rgb(var(--kdini-accent) / 0.18) !important;
    }

    .fi-input::placeholder,
    .fi-select-input::placeholder,
    .fi-textarea::placeholder,
    textarea::placeholder,
    input::placeholder {
        color: rgb(var(--kdini-muted) / 0.85) !important;
    }

    .fi-page table,
    .kd-table {
        color: rgb(var(--kdini-text));
    }

    .kd-table-wrap {
        border-radius: 0.95rem;
        border: 1px solid rgb(var(--kdini-border) / 0.52);
        background: rgb(var(--kdini-bg-soft) / 0.54);
        overflow: hidden;
    }

    .kd-table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
        table-layout: auto;
    }

    .kd-table th,
    .kd-table td {
        vertical-align: top;
    }

    .kd-table-compact th,
    .kd-table-compact td {
        padding: 0.35rem 0.38rem !important;
        line-height: 1.35;
        font-size: 0.69rem;
    }

    .kd-table-compact th {
        white-space: nowrap;
    }

    .kd-sql-files-table th:nth-child(1),
    .kd-sql-files-table td:nth-child(1),
    .kd-sql-files-table th:nth-child(4),
    .kd-sql-files-table td:nth-child(4),
    .kd-sql-files-table th:nth-child(5),
    .kd-sql-files-table td:nth-child(5),
    .kd-sql-files-table th:nth-child(6),
    .kd-sql-files-table td:nth-child(6) {
        text-align: center;
        white-space: nowrap;
    }

    .kd-sql-files-table td:nth-child(2) .kd-cell-preview {
        max-width: 14rem;
    }

    .kd-sql-files-table td:nth-child(7) {
        white-space: nowrap;
    }

    .kd-sql-content-table td {
        vertical-align: top;
    }

    .kd-sql-content-table .kd-line-preview {
        max-width: 10rem;
    }

    .fi-page table thead,
    .kd-table-head {
        background: rgb(var(--kdini-surface-strong) / 0.72);
    }

    .fi-page table thead tr th,
    .kd-table-head th {
        color: rgb(var(--kdini-text));
        font-weight: 900;
        border-bottom: 1px solid rgb(var(--kdini-border) / 0.48);
        position: sticky;
        top: 0;
        z-index: 2;
        backdrop-filter: blur(4px);
    }

    .fi-page table tbody,
    .kd-table-body {
        background: rgb(var(--kdini-bg-soft) / 0.45);
    }

    .fi-page table tbody tr,
    .kd-table-body tr {
        border-bottom: 1px solid rgb(var(--kdini-border) / 0.35);
        background: rgb(var(--kdini-bg-soft) / 0.35);
        transition: background-color 0.18s ease;
    }

    .fi-page table tbody tr:nth-child(2n),
    .kd-table-body tr:nth-child(2n) {
        background: rgb(var(--kdini-surface) / 0.44);
    }

    .fi-page table tbody tr:hover,
    .kd-row-hover:hover {
        background: rgb(var(--kdini-accent-strong) / 0.23) !important;
    }

    .kd-card {
        border-radius: var(--kdini-card-radius);
        border: 1px solid rgb(var(--kdini-border) / 0.5);
        background: linear-gradient(160deg, rgb(var(--kdini-surface) / 0.93), rgb(var(--kdini-bg-soft) / 0.92));
        box-shadow: 0 14px 34px -24px rgb(8 14 24 / 0.96);
        color: rgb(var(--kdini-text));
        padding: var(--kdini-space-3);
    }

    .kd-edit-card {
        background:
            radial-gradient(circle at 90% 0%, rgb(var(--kdini-accent) / 0.16), transparent 32%),
            linear-gradient(160deg, rgb(var(--kdini-surface-strong) / 0.88), rgb(var(--kdini-bg-soft) / 0.94));
        border-color: rgb(var(--kdini-accent) / 0.45);
    }

    .kd-stat-card {
        border-radius: 1rem;
        border: 1px solid rgb(var(--kdini-border) / 0.5);
        background: linear-gradient(145deg, rgb(var(--kdini-surface) / 0.9), rgb(var(--kdini-bg-soft) / 0.9));
        padding: 1rem;
        box-shadow: 0 14px 26px -24px rgb(0 0 0 / 0.9);
    }

    .kd-hierarchy-panel {
        display: flex;
        flex-direction: column;
        min-height: 20rem;
        padding: 0.72rem;
    }

    .kd-hierarchy-head {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 0.45rem;
    }

    .kd-hierarchy-list-wrap {
        margin-top: 0.58rem;
        border-radius: 0.75rem;
        border: 1px solid rgb(var(--kdini-border) / 0.45);
        background: rgb(var(--kdini-bg-soft) / 0.58);
        overflow: auto;
        max-height: 23rem;
    }

    .kd-hierarchy-list {
        margin: 0;
        padding: 0;
        list-style: none;
    }

    .kd-hierarchy-item {
        width: 100%;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        gap: 0.14rem;
        padding: 0.5rem 0.58rem;
        text-align: right;
        border: 0;
        border-bottom: 1px solid rgb(var(--kdini-border) / 0.34);
        background: transparent;
        color: rgb(var(--kdini-text));
        cursor: pointer;
        transition: background-color 0.14s ease;
    }

    .kd-hierarchy-item:hover {
        background: rgb(var(--kdini-accent-strong) / 0.24);
    }

    .kd-hierarchy-list li:last-child .kd-hierarchy-item {
        border-bottom: 0;
    }

    .kd-hierarchy-item.is-active {
        background:
            linear-gradient(90deg, rgb(var(--kdini-accent) / 0.24), transparent),
            rgb(var(--kdini-accent-strong) / 0.22);
        box-shadow: inset -2px 0 0 rgb(var(--kdini-accent) / 0.75);
    }

    .kd-hierarchy-title {
        font-size: 0.72rem;
        font-weight: 800;
        line-height: 1.34;
    }

    .kd-hierarchy-meta {
        font-size: 0.62rem;
        color: rgb(var(--kdini-muted));
        line-height: 1.34;
    }

    .kd-quick-link,
    .kd-quick-button {
        border-radius: 0.8rem;
        border: 1px solid rgb(var(--kdini-border) / 0.54);
        background: rgb(var(--kdini-bg-soft) / 0.62);
        color: rgb(var(--kdini-text));
        font-size: 0.73rem;
        font-weight: 800;
        padding: 0.52rem 0.72rem;
        transition: all 0.16s ease;
        text-align: right;
    }

    .kd-quick-link:hover,
    .kd-quick-button:hover {
        border-color: rgb(var(--kdini-accent) / 0.75);
        background: rgb(var(--kdini-accent-strong) / 0.32);
    }

    .kd-quick-button {
        background: linear-gradient(135deg, rgb(var(--kdini-accent)), rgb(var(--kdini-accent-strong)));
        color: rgb(247 251 255);
    }

    .kd-chip-button {
        border-radius: 0.7rem;
        border: 1px solid rgb(var(--kdini-border) / 0.5);
        background: rgb(var(--kdini-bg-soft) / 0.92);
        color: rgb(var(--kdini-text));
        font-size: 0.69rem;
        font-weight: 800;
        padding: 0.34rem 0.52rem;
    }

    .kd-chip-button--primary {
        background: linear-gradient(135deg, rgb(var(--kdini-accent)), rgb(var(--kdini-accent-strong)));
        color: rgb(247 251 255);
    }

    .kd-chip-button--success {
        background: linear-gradient(135deg, rgb(var(--kdini-success)), rgb(19 143 109));
        color: rgb(247 251 255);
    }

    .kd-field-label {
        display: block;
        font-size: 0.64rem;
        font-weight: 800;
        color: rgb(var(--kdini-muted));
        line-height: 1.22;
    }

    .kd-muted {
        color: rgb(var(--kdini-muted));
    }

    .kd-link {
        color: rgb(132 196 255);
        text-decoration: none;
    }

    .kd-link:hover {
        color: rgb(180 219 255);
        text-decoration: underline;
    }

    .kd-textarea {
        width: 100%;
        border-radius: 0.75rem;
        border: 1px solid rgb(var(--kdini-border) / 0.55);
        background: rgb(var(--kdini-bg-soft) / 0.72);
        color: rgb(var(--kdini-text));
        font-size: 0.76rem;
        padding: 0.42rem 0.56rem;
        line-height: 1.45;
        resize: vertical;
        min-height: 5.6rem;
    }

    .kd-textarea--code {
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
        min-height: 10.5rem;
        max-height: 65vh;
    }

    .kd-textarea:focus {
        outline: none;
        border-color: rgb(var(--kdini-accent) / 0.82);
        box-shadow: 0 0 0 3px rgb(var(--kdini-accent) / 0.2);
    }

    .kd-textarea-rtl {
        text-align: right;
        direction: rtl;
        unicode-bidi: plaintext;
    }

    .kd-select {
        width: 100%;
        border-radius: 0.75rem;
        border: 1px solid rgb(var(--kdini-border) / 0.55);
        background: rgb(var(--kdini-bg-soft) / 0.72);
        color: rgb(var(--kdini-text));
        padding: 0.4rem 0.52rem;
        font-size: 0.74rem;
        line-height: 1.22;
    }

    .kd-select:focus {
        outline: none;
        border-color: rgb(var(--kdini-accent) / 0.82);
        box-shadow: 0 0 0 3px rgb(var(--kdini-accent) / 0.2);
    }

    .kd-line-preview {
        max-width: 12rem;
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
    }

    .kd-cell-preview {
        max-width: 6.5rem;
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
    }

    .kd-inline-edit-row {
        background: rgb(var(--kdini-accent-strong) / 0.2) !important;
    }

    .kd-inline-input {
        width: 100%;
        min-width: 3.9rem;
        border-radius: 0.6rem;
        border: 1px solid rgb(var(--kdini-border) / 0.62);
        background: rgb(var(--kdini-bg-soft) / 0.88);
        color: rgb(var(--kdini-text));
        font-size: 0.69rem;
        line-height: 1.22;
        padding: 0.24rem 0.35rem;
    }

    .kd-inline-input--wide {
        min-width: 5.7rem;
    }

    .kd-inline-subpanel {
        border: 1px solid rgb(var(--kdini-border) / 0.44);
        border-radius: 0.7rem;
        background: rgb(var(--kdini-bg-soft) / 0.58);
        padding: 0.5rem;
    }

    .kd-inline-subgrid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(7.3rem, 1fr));
        gap: 0.4rem;
    }

    .kd-edit-card,
    .kd-inline-edit-row {
        font-size: 0.73rem;
    }

    .kd-edit-card h3 {
        font-size: 0.8rem;
        line-height: 1.25;
    }

    .kd-edit-card .kd-muted {
        font-size: 0.68rem;
    }

    .kd-edit-card .kd-field-label {
        font-size: 0.62rem;
    }

    .kd-edit-card .fi-input,
    .kd-edit-card .fi-select-input,
    .kd-edit-card .kd-inline-input,
    .kd-edit-card .kd-textarea,
    .kd-edit-card .kd-select {
        font-size: 0.72rem;
    }

    .kd-edit-card .fi-input-wrp {
        min-height: 1.75rem;
    }

    .kd-edit-card .fi-btn,
    .kd-inline-edit-row .fi-btn {
        min-height: 1.66rem;
        padding-inline: 0.48rem;
        font-size: 0.68rem;
    }

    .kd-inline-input:focus {
        outline: none;
        border-color: rgb(var(--kdini-accent) / 0.82);
        box-shadow: 0 0 0 2px rgb(var(--kdini-accent) / 0.2);
    }

    .kd-file-input {
        width: 100%;
        border-radius: 0.75rem;
        border: 1px dashed rgb(var(--kdini-border) / 0.72);
        background: rgb(var(--kdini-bg-soft) / 0.72);
        color: rgb(var(--kdini-text));
        padding: 0.65rem 0.8rem;
        font-size: 0.84rem;
        line-height: 1.35;
    }

    .kd-file-input::file-selector-button {
        border: 1px solid rgb(var(--kdini-border) / 0.7);
        background: rgb(var(--kdini-surface-strong) / 0.75);
        color: rgb(var(--kdini-text));
        border-radius: 0.55rem;
        padding: 0.35rem 0.75rem;
        margin-inline-end: 0.7rem;
        cursor: pointer;
    }

    .kd-checkbox {
        border-radius: 0.75rem;
        border: 1px solid rgb(var(--kdini-border) / 0.5);
        background: rgb(var(--kdini-bg-soft) / 0.62);
    }

    .kd-console,
    .fi-page pre {
        border-radius: 0.85rem;
        border: 1px solid rgb(var(--kdini-border) / 0.48);
        background: linear-gradient(180deg, rgb(var(--kdini-console-bg) / 0.96), rgb(15 24 35 / 0.98)) !important;
        color: rgb(var(--kdini-console-text)) !important;
    }

    @media (min-width: 1024px) {
        .kd-card {
            padding: 0.88rem;
        }
    }

    @media (max-width: 900px) {
        .kd-card {
            padding: 0.6rem;
        }

        .kd-hierarchy-list-wrap {
            max-height: 15rem;
        }

        .kd-table-compact th,
        .kd-table-compact td {
            padding: 0.28rem 0.3rem !important;
            font-size: 0.65rem;
        }

        .kd-inline-input {
            min-width: 3.35rem;
            font-size: 0.66rem;
        }

        .kd-inline-input--wide {
            min-width: 5rem;
        }

        .kd-sql-files-table td:nth-child(2) .kd-cell-preview {
            max-width: 10rem;
        }

        .kd-sql-content-table .kd-line-preview {
            max-width: 7.2rem;
        }

        .kd-toolbar {
            align-items: stretch;
        }

        .kd-toolbar-actions {
            width: 100%;
        }

        .kd-toolbar-actions .fi-btn {
            flex: 1 1 auto;
            justify-content: center;
        }

        .kd-search-wrap,
        .kd-grow-input {
            min-width: 0;
            width: 100%;
            flex: 1 1 100%;
        }

        .kd-table-wrap {
            overflow: auto;
        }
    }
}
